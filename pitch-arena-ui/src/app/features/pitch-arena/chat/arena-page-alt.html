<div class="m-4 flex h-screen flex-col gap-4 relative">
    <button type="button" class="absolute right-2 top-2 flex h-6 w-6 items-center justify-center rounded-full text-xs font-semibold text-neutral-500 hover:text-neutral-800 hover:bg-neutral-100" aria-label="Exit arena" title="Exit arena" (click)="quitArena()">
        X
    </button>
    <!-- todo bug now the host and the first judge are lit up-->
    @let hostSpeaking = !HOST_DONE;
    <div class="flex flex-wrap justify-center gap-4" style="--judge-card-width: 16rem; --judge-card-height: 350px; --judge-card-image-height: 9rem; --judge-card-outer-padding: 1rem; --judge-card-content-padding: 0.75rem; --judge-card-footer-offset: 0.75rem;">
        @for(judge of arenaConfig()?.judges ?? []; track judge.id){
        <div
          class="rounded-[22px] p-1 transition-colors duration-200"
          [style.background-color]="((hostSpeaking && judge.id === 'host') || isJudgeSpeaking(judge.id)) ? 'color-mix(in srgb, var(--color-primary) 18%, transparent)' : 'transparent'"
        >
              <judge-card
                [topTitle]="'Panel'"
                [rightTag]="'Score'"
                [name]="judge.label"
                [hp]="'--'"
                [criteriaTitle]="'Tone'"
                [criteriaText]="judge.tone ?? 'direct'"
                [rating]="0"
                [criteria2Title]="'Focus'"
                [criteria2Text]="(judge.dimension ?? '')"
                [rating2]="0"
                [weakness]="'n/a'"
                [resist]="'n/a'"
                [tone]="judge.dimension"
              ></judge-card>
        </div>
        }
    </div>

    <div class="flex justify-center">
      <h1 class="font-extrabold">Goal: {{arenaConfig().goal}}</h1>
    </div>
    
    <div class="flex min-h-0 flex-1 gap-4">
      
        <chat-ui-horizontal class="flex-1"
        (send)="gotMessage($event)"
        [messages]="messages()"></chat-ui-horizontal>

        <div class=" w-1/6">
        <h2 class="text-xl font-bold">Conversation Options</h2>
        <p class="text-sm">To get realism set these to false but if you want to know what to work on set true. </p>
        <div class="flex flex-col">
            <ui-toggle-button [(selected)]="liveScoring" label="See Live Scoring"></ui-toggle-button> 
            <ui-toggle-button [(selected)]="seeThinking" label="See Judge Thinking"></ui-toggle-button> 
        </div>
        </div>

    </div>
</div>
